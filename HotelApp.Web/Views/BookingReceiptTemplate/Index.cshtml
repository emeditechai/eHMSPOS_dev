@model HotelApp.Web.ViewModels.BookingReceiptTemplateConfigurationViewModel
@{
    ViewData["Title"] = "Booking Receipt Template Configuration";
}

<div class="main-content">

    <div class="page-header">
        <h2><i class="fas fa-file-invoice"></i> Booking Receipt Template Configuration</h2>
        <div></div>
    </div>

    <div class="form-container form-container-fluid">
        <h3 style="margin-bottom: 20px;"><i class="fas fa-palette"></i> Choose Default Template</h3>

        <form asp-controller="BookingReceiptTemplate" asp-action="Save" method="post">
            @Html.AntiForgeryToken()

            <style>
                .brt-grid {
                    display: grid;
                    grid-template-columns: repeat(2, minmax(0, 1fr));
                    gap: 16px;
                    margin-top: 12px;
                }

                @@media (max-width: 900px) {
                    .brt-grid {
                        grid-template-columns: 1fr;
                    }
                }
                .brt-card {
                    border: 1px solid #e5e7eb;
                    border-radius: 12px;
                    background: #fff;
                    overflow: hidden;
                }
                .brt-card-header {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    gap: 12px;
                    padding: 14px 14px 10px 14px;
                    border-bottom: 1px solid #f3f4f6;
                }
                .brt-card-title {
                    font-weight: 800;
                    color: #111827;
                    margin: 0;
                    font-size: 1rem;
                }
                .brt-card-desc {
                    color: #6b7280;
                    font-size: 0.9rem;
                    margin: 0;
                    padding: 0 14px 10px 14px;
                }
                .brt-preview {
                    padding: 12px 14px 14px 14px;
                }
                .brt-preview-box {
                    border: 1px dashed #d1d5db;
                    border-radius: 10px;
                    padding: 12px;
                    background: #f9fafb;
                    aspect-ratio: 297 / 210;
                    display: flex;
                    flex-direction: column;
                }
                .brt-mini-header {
                    display: flex;
                    justify-content: space-between;
                    gap: 10px;
                    align-items: center;
                    margin-bottom: 10px;
                }
                .brt-mini-hotel {
                    font-weight: 800;
                    font-size: 0.95rem;
                    color: #111827;
                }
                .brt-mini-tag {
                    font-size: 0.8rem;
                    padding: 4px 10px;
                    border-radius: 999px;
                    border: 1px solid #e5e7eb;
                    background: #fff;
                    color: #374151;
                    font-weight: 700;
                }
                .brt-mini-row {
                    height: 10px;
                    border-radius: 6px;
                    background: #e5e7eb;
                    margin-bottom: 8px;
                }
                .brt-mini-row.thin { height: 7px; background: #edf2f7; }
                .brt-mini-row.dark { background: #d1d5db; }
                .brt-mini-total {
                    display: flex;
                    justify-content: space-between;
                    gap: 10px;
                    margin-top: auto;
                    padding-top: 10px;
                    border-top: 1px solid #e5e7eb;
                }
                .brt-mini-total span { font-weight: 800; }
                .brt-selected {
                    border-color: #667eea;
                    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.18);
                }
            </style>

            <div class="brt-grid">
                @foreach (var t in Model.Templates)
                {
                    var isSelected = string.Equals(Model.CurrentTemplateKey, t.Key, StringComparison.OrdinalIgnoreCase);
                    <label class="brt-card @(isSelected ? "brt-selected" : string.Empty)">
                        <div class="brt-card-header">
                            <div>
                                <div class="brt-card-title">@t.Name</div>
                            </div>
                            <div>
                                <input type="radio" name="templateKey" value="@t.Key" @(isSelected ? "checked" : null) />
                            </div>
                        </div>
                        <p class="brt-card-desc">@t.Description</p>
                        <div class="brt-preview">
                            <div class="brt-preview-box">
                                <div class="brt-mini-header">
                                    <div class="brt-mini-hotel">LuxStay Hotel</div>
                                    <div class="brt-mini-tag">@t.Key.ToUpperInvariant()</div>
                                </div>
                                @if (t.Key == "classic")
                                {
                                    <div class="brt-mini-row"></div>
                                    <div class="brt-mini-row dark"></div>
                                    <div class="brt-mini-row thin"></div>
                                    <div class="brt-mini-row thin"></div>
                                }
                                else if (t.Key == "modern")
                                {
                                    <div class="brt-mini-row dark"></div>
                                    <div class="brt-mini-row"></div>
                                    <div class="brt-mini-row"></div>
                                    <div class="brt-mini-row thin"></div>
                                }
                                else if (t.Key == "compact")
                                {
                                    <div class="brt-mini-row thin"></div>
                                    <div class="brt-mini-row thin"></div>
                                    <div class="brt-mini-row thin"></div>
                                    <div class="brt-mini-row thin"></div>
                                }
                                else
                                {
                                    <div class="brt-mini-row dark"></div>
                                    <div class="brt-mini-row dark"></div>
                                    <div class="brt-mini-row dark"></div>
                                    <div class="brt-mini-row thin"></div>
                                }
                                <div class="brt-mini-total">
                                    <span>Total</span>
                                    <span>â‚¹ 0.00</span>
                                </div>
                            </div>
                        </div>
                    </label>
                }
            </div>

            <div class="form-actions" style="margin-top: 18px;">
                <button type="submit" class="btn-save">
                    <i class="fas fa-save"></i> Save Default Template
                </button>
            </div>
        </form>
    </div>

</div>
