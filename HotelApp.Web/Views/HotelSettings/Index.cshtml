@model HotelApp.Web.Models.HotelSettings
@{
    ViewData["Title"] = "Hotel Settings";
    string hotelName = string.IsNullOrWhiteSpace(Model.HotelName) ? "Hotel Settings" : Model.HotelName;
    var words = hotelName.Split(' ');
    string initials = words.Length >= 2
        ? $"{words[0][0]}{words[1][0]}".ToUpper()
        : hotelName.Substring(0, Math.Min(2, hotelName.Length)).ToUpper();
}

@section Styles {
<style>
    .hs-page { padding: 1.5rem; }
    .hs-hero {
        background: linear-gradient(135deg, #1a2a6c 0%, #b21f1f 65%, #fdbb2d 100%);
        border-radius: 14px; padding: 2rem 2.5rem; margin-bottom: 1.75rem;
        display: flex; align-items: center; justify-content: space-between;
        gap: 1.5rem; flex-wrap: wrap;
        box-shadow: 0 6px 24px rgba(26,42,108,0.22);
        position: relative; overflow: hidden;
    }
    .hs-hero::before { content:''; position:absolute; top:-40px; right:-40px; width:200px; height:200px; background:rgba(255,255,255,0.06); border-radius:50%; }
    .hs-hero::after  { content:''; position:absolute; bottom:-60px; left:30%; width:260px; height:260px; background:rgba(255,255,255,0.04); border-radius:50%; }
    .hs-hero-left { display:flex; align-items:center; gap:1.25rem; z-index:1; }
    .hs-avatar {
        width:64px; height:64px; border-radius:16px;
        background:rgba(255,255,255,0.2); border:2px solid rgba(255,255,255,0.35);
        display:flex; align-items:center; justify-content:center;
        font-size:1.5rem; font-weight:800; color:#fff; flex-shrink:0; backdrop-filter:blur(4px);
    }
    .hs-hero-title { color:#fff; font-size:1.45rem; font-weight:700; margin:0 0 .2rem; letter-spacing:-.3px; }
    .hs-hero-sub   { color:rgba(255,255,255,.78); font-size:.875rem; margin:0; }
    .hs-hero-right { display:flex; align-items:center; gap:.75rem; flex-wrap:wrap; z-index:1; }
    .hs-hero-badge { background:rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.3); color:#fff; padding:.35rem .85rem; border-radius:20px; font-size:.78rem; font-weight:600; white-space:nowrap; }
    .hs-edit-btn {
        background:rgba(255,255,255,.95); color:#1a2a6c; border:none;
        padding:.6rem 1.4rem; border-radius:8px; font-weight:700; font-size:.875rem;
        text-decoration:none; display:inline-flex; align-items:center; gap:.5rem;
        transition:all .2s; box-shadow:0 2px 8px rgba(0,0,0,.15); white-space:nowrap;
    }
    .hs-edit-btn:hover { background:#fff; color:#b21f1f; transform:translateY(-1px); box-shadow:0 4px 14px rgba(0,0,0,.2); }
    .hs-card { background:#fff; border-radius:12px; box-shadow:0 1px 4px rgba(0,0,0,.06),0 4px 16px rgba(0,0,0,.04); margin-bottom:1.5rem; overflow:hidden; }
    .hs-card-header { display:flex; align-items:center; gap:.75rem; padding:1.1rem 1.5rem; border-bottom:1px solid #f0f2f5; background:#fafbfd; }
    .hs-card-header-icon { width:36px; height:36px; border-radius:10px; display:flex; align-items:center; justify-content:center; color:#fff; font-size:.9rem; flex-shrink:0; }
    .hs-card-header h3 { margin:0; font-size:.95rem; font-weight:700; color:#1e293b; }
    .hs-card-body { padding:1.5rem; }
    .hs-info-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:1rem; }
    .hs-info-full { grid-column:1 / -1; }
    .hs-info-label { font-size:.7rem; font-weight:700; text-transform:uppercase; letter-spacing:.5px; color:#94a3b8; margin-bottom:.4rem; }
    .hs-info-value { font-size:.9rem; font-weight:500; color:#1e293b; background:#f8fafc; border:1px solid #e9edf3; border-radius:8px; padding:.65rem .9rem; display:flex; align-items:center; gap:.55rem; min-height:44px; word-break:break-word; }
    .hs-info-value.empty { color:#cbd5e1; font-style:italic; }
    .hs-info-value i { color:#94a3b8; font-size:.85rem; flex-shrink:0; }
    .hs-info-value a { color:#1a2a6c; text-decoration:none; }
    .hs-info-value a:hover { text-decoration:underline; }
    .hs-param-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; }
    .hs-param-card { background:#f8fafc; border:1px solid #e9edf3; border-radius:10px; padding:1rem 1.1rem; display:flex; align-items:center; gap:.9rem; transition:box-shadow .2s,transform .2s; }
    .hs-param-card:hover { box-shadow:0 4px 14px rgba(26,42,108,.1); transform:translateY(-2px); }
    .hs-param-icon { width:40px; height:40px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff; flex-shrink:0; }
    .hs-param-label { font-size:.68rem; font-weight:700; text-transform:uppercase; letter-spacing:.4px; color:#94a3b8; margin-bottom:.3rem; }
    .hs-param-value { font-size:1.05rem; font-weight:800; color:#1e293b; line-height:1.2; }
    .hs-badge { display:inline-flex; align-items:center; gap:.3rem; padding:.22rem .65rem; border-radius:20px; font-size:.78rem; font-weight:700; }
    .hs-badge-yes { background:#dcfce7; color:#166534; }
    .hs-badge-no  { background:#fee2e2; color:#991b1b; }
    .hs-logo-wrap { display:flex; flex-direction:column; align-items:center; padding:1.5rem 1rem; gap:1rem; }
    .hs-logo-frame { width:160px; height:160px; background:#f8fafc; border:2px dashed #e2e8f0; border-radius:16px; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .hs-logo-frame img { max-width:100%; max-height:100%; object-fit:contain; padding:.75rem; }
    .hs-logo-ph { text-align:center; color:#cbd5e1; }
    .hs-logo-ph i { font-size:3rem; display:block; margin-bottom:.5rem; }
    .hs-logo-ph span { font-size:.8rem; }
    .ic-blue{background:#3b82f6;} .ic-indigo{background:#6366f1;} .ic-purple{background:#8b5cf6;}
    .ic-pink{background:#ec4899;} .ic-rose{background:#f43f5e;} .ic-orange{background:#f97316;}
    .ic-amber{background:#f59e0b;} .ic-green{background:#22c55e;} .ic-teal{background:#14b8a6;}
    .ic-cyan{background:#06b6d4;} .ic-slate{background:#64748b;}
    .ic-brand{background:linear-gradient(135deg,#1a2a6c,#b21f1f);}
    @@media (max-width:1199px) { .hs-param-grid { grid-template-columns:repeat(2,1fr); } }
    @@media (max-width:767px)  {
        .hs-param-grid,.hs-info-grid { grid-template-columns:1fr; }
        .hs-info-full { grid-column:1; }
        .hs-hero { padding:1.25rem 1.5rem; }
        .hs-hero-title { font-size:1.15rem; }
    }
</style>
}

<div class="hs-page">

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show mb-3" role="alert">
            <i class="fas fa-check-circle me-2"></i>@TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show mb-3" role="alert">
            <i class="fas fa-exclamation-circle me-2"></i>@TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <div class="hs-hero">
        <div class="hs-hero-left">
            <div class="hs-avatar">@initials</div>
            <div>
                <h1 class="hs-hero-title">@hotelName</h1>
                <p class="hs-hero-sub">
                    <i class="fas fa-map-marker-alt me-1"></i>
                    @(string.IsNullOrWhiteSpace(Model.Address) ? "Address not configured" : Model.Address)
                </p>
            </div>
        </div>
        <div class="hs-hero-right">
            @if (!string.IsNullOrWhiteSpace(Model.GSTCode))
            {
                <span class="hs-hero-badge"><i class="fas fa-certificate me-1"></i>GST: @Model.GSTCode</span>
            }
            <a asp-action="Edit" class="hs-edit-btn"><i class="fas fa-pen"></i> Edit Settings</a>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-xl-8 col-lg-7">

            <div class="hs-card">
                <div class="hs-card-header">
                    <div class="hs-card-header-icon ic-brand"><i class="fas fa-building"></i></div>
                    <h3>Hotel Details</h3>
                </div>
                <div class="hs-card-body">
                    <div class="hs-info-grid">
                        <div>
                            <div class="hs-info-label">Hotel Name</div>
                            <div class="hs-info-value @(string.IsNullOrWhiteSpace(Model.HotelName) ? "empty" : "")">
                                <i class="fas fa-hotel"></i>
                                @(string.IsNullOrWhiteSpace(Model.HotelName) ? "Not Set" : Model.HotelName)
                            </div>
                        </div>
                        <div>
                            <div class="hs-info-label">GST Code</div>
                            <div class="hs-info-value @(string.IsNullOrWhiteSpace(Model.GSTCode) ? "empty" : "")">
                                <i class="fas fa-certificate"></i>
                                @(string.IsNullOrWhiteSpace(Model.GSTCode) ? "Not Set" : Model.GSTCode)
                            </div>
                        </div>
                        <div class="hs-info-full">
                            <div class="hs-info-label">Address</div>
                            <div class="hs-info-value @(string.IsNullOrWhiteSpace(Model.Address) ? "empty" : "")">
                                <i class="fas fa-map-marker-alt"></i>
                                @(string.IsNullOrWhiteSpace(Model.Address) ? "Not Set" : Model.Address)
                            </div>
                        </div>
                        <div>
                            <div class="hs-info-label">Contact Number 1</div>
                            <div class="hs-info-value @(string.IsNullOrWhiteSpace(Model.ContactNumber1) ? "empty" : "")">
                                <i class="fas fa-phone"></i>
                                @(string.IsNullOrWhiteSpace(Model.ContactNumber1) ? "Not Set" : Model.ContactNumber1)
                            </div>
                        </div>
                        <div>
                            <div class="hs-info-label">Contact Number 2</div>
                            <div class="hs-info-value @(string.IsNullOrWhiteSpace(Model.ContactNumber2) ? "empty" : "")">
                                <i class="fas fa-phone"></i>
                                @(string.IsNullOrWhiteSpace(Model.ContactNumber2) ? "Not Set" : Model.ContactNumber2)
                            </div>
                        </div>
                        <div>
                            <div class="hs-info-label">Email Address</div>
                            <div class="hs-info-value @(string.IsNullOrWhiteSpace(Model.EmailAddress) ? "empty" : "")">
                                <i class="fas fa-envelope"></i>
                                @(string.IsNullOrWhiteSpace(Model.EmailAddress) ? "Not Set" : Model.EmailAddress)
                            </div>
                        </div>
                        <div>
                            <div class="hs-info-label">Website</div>
                            <div class="hs-info-value @(string.IsNullOrWhiteSpace(Model.Website) ? "empty" : "")">
                                <i class="fas fa-globe"></i>
                                @if (!string.IsNullOrWhiteSpace(Model.Website))
                                {
                                    <a href="@Model.Website" target="_blank">@Model.Website</a>
                                }
                                else { <text>Not Set</text> }
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="hs-card">
                <div class="hs-card-header">
                    <div class="hs-card-header-icon ic-indigo"><i class="fas fa-sliders-h"></i></div>
                    <h3>Operational Parameters</h3>
                </div>
                <div class="hs-card-body">
                    <div class="hs-param-grid">
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-blue"><i class="fas fa-sign-in-alt"></i></div>
                            <div>
                                <div class="hs-param-label">Check-In Time</div>
                                <div class="hs-param-value">@Model.CheckInTime.ToString(@"hh\:mm")</div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-cyan"><i class="fas fa-sign-out-alt"></i></div>
                            <div>
                                <div class="hs-param-label">Check-Out Time</div>
                                <div class="hs-param-value">@Model.CheckOutTime.ToString(@"hh\:mm")</div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-teal"><i class="fas fa-calendar-day"></i></div>
                            <div>
                                <div class="hs-param-label">By Pass Actual Day Rate</div>
                                <div class="hs-param-value">
                                    <span class="hs-badge @(Model.ByPassActualDayRate ? "hs-badge-yes" : "hs-badge-no")">
                                        <i class="fas @(Model.ByPassActualDayRate ? "fa-check" : "fa-times")"></i>
                                        @(Model.ByPassActualDayRate ? "YES" : "NO")
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-orange"><i class="fas fa-percentage"></i></div>
                            <div>
                                <div class="hs-param-label">Discount Approval Required</div>
                                <div class="hs-param-value">
                                    <span class="hs-badge @(Model.DiscountApprovalRequired ? "hs-badge-yes" : "hs-badge-no")">
                                        <i class="fas @(Model.DiscountApprovalRequired ? "fa-check" : "fa-times")"></i>
                                        @(Model.DiscountApprovalRequired ? "YES" : "NO")
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-rose"><i class="fas fa-rupee-sign"></i></div>
                            <div>
                                <div class="hs-param-label">Advance Payment Required</div>
                                <div class="hs-param-value">
                                    <span class="hs-badge @(Model.MinimumBookingAmountRequired ? "hs-badge-yes" : "hs-badge-no")">
                                        <i class="fas @(Model.MinimumBookingAmountRequired ? "fa-check" : "fa-times")"></i>
                                        @(Model.MinimumBookingAmountRequired ? "YES" : "NO")
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-amber"><i class="fas fa-coins"></i></div>
                            <div>
                                <div class="hs-param-label">Minimum Booking %</div>
                                <div class="hs-param-value">
                                    @(Model.MinimumBookingAmount.HasValue ? $"{Model.MinimumBookingAmount.Value:N2}%" : "&#8212;")
                                </div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-slate"><i class="fas fa-clock"></i></div>
                            <div>
                                <div class="hs-param-label">No-Show Grace Hours</div>
                                <div class="hs-param-value">@Model.NoShowGraceHours hrs</div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-purple"><i class="fas fa-undo"></i></div>
                            <div>
                                <div class="hs-param-label">Refund Approval Threshold</div>
                                <div class="hs-param-value">
                                    @(Model.CancellationRefundApprovalThreshold.HasValue
                                        ? $"Rs.{Model.CancellationRefundApprovalThreshold.Value:N2}"
                                        : "Disabled")
                                </div>
                            </div>
                        </div>
                        <div class="hs-param-card">
                            <div class="hs-param-icon ic-green"><i class="fas fa-file-contract"></i></div>
                            <div>
                                <div class="hs-param-label">Cancellation Policy</div>
                                <div class="hs-param-value">
                                    <span class="hs-badge @(Model.EnableCancellationPolicy ? "hs-badge-yes" : "hs-badge-no")">
                                        <i class="fas @(Model.EnableCancellationPolicy ? "fa-check" : "fa-times")"></i>
                                        @(Model.EnableCancellationPolicy ? "Enabled" : "Disabled")
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-xl-4 col-lg-5">

            <div class="hs-card">
                <div class="hs-card-header">
                    <div class="hs-card-header-icon ic-pink"><i class="fas fa-image"></i></div>
                    <h3>Hotel Logo</h3>
                </div>
                <div class="hs-card-body">
                    <div class="hs-logo-wrap">
                        <div class="hs-logo-frame">
                            @if (!string.IsNullOrWhiteSpace(Model.LogoPath))
                            {
                                <img src="@Model.LogoPath" alt="Hotel Logo" />
                            }
                            else
                            {
                                <div class="hs-logo-ph">
                                    <i class="fas fa-image"></i>
                                    <span>No logo uploaded</span>
                                </div>
                            }
                        </div>
                        <a asp-action="Edit" class="btn btn-sm btn-outline-secondary w-100">
                            <i class="fas fa-upload me-2"></i>Upload / Change Logo
                        </a>
                    </div>
                </div>
            </div>

            <div class="hs-card">
                <div class="hs-card-header">
                    <div class="hs-card-header-icon ic-teal"><i class="fas fa-info-circle"></i></div>
                    <h3>Quick Summary</h3>
                </div>
                <div class="p-0">
                    <ul class="list-group list-group-flush" style="font-size:.875rem;">
                        <li class="list-group-item d-flex justify-content-between align-items-center px-4 py-3">
                            <span class="text-muted"><i class="fas fa-sign-in-alt me-2 text-primary"></i>Check-In</span>
                            <strong>@Model.CheckInTime.ToString(@"hh\:mm")</strong>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-4 py-3">
                            <span class="text-muted"><i class="fas fa-sign-out-alt me-2 text-info"></i>Check-Out</span>
                            <strong>@Model.CheckOutTime.ToString(@"hh\:mm")</strong>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-4 py-3">
                            <span class="text-muted"><i class="fas fa-phone me-2 text-success"></i>Primary Contact</span>
                            <strong>@(string.IsNullOrWhiteSpace(Model.ContactNumber1) ? "&#8212;" : Model.ContactNumber1)</strong>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-4 py-3">
                            <span class="text-muted"><i class="fas fa-file-contract me-2 text-warning"></i>Cancellation Policy</span>
                            <span class="hs-badge @(Model.EnableCancellationPolicy ? "hs-badge-yes" : "hs-badge-no")">@(Model.EnableCancellationPolicy ? "ON" : "OFF")</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-4 py-3">
                            <span class="text-muted"><i class="fas fa-rupee-sign me-2 text-danger"></i>Advance Payment</span>
                            <span class="hs-badge @(Model.MinimumBookingAmountRequired ? "hs-badge-yes" : "hs-badge-no")">@(Model.MinimumBookingAmountRequired ? "ON" : "OFF")</span>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
</div>
